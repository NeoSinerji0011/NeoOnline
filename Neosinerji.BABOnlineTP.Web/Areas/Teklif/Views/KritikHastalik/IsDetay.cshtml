@model Neosinerji.BABOnlineTP.Web.Areas.Teklif.Models.KritikHastalikAdimModel

@section HorizontalMenu
{
    <ul class="nav">
        <li class="active">
            <a href="#">Detay<span class="selected"></span></a>
        </li>
    </ul>
}

@section PageHeader
{

}

<div class="portlet box light-grey" style="margin-top: 24px;">
    <div class="portlet-title">
        <div class="caption"><i class="icon-reorder"></i>İş Detay</div>
    </div>
    <div class="portlet-body form">
        <div class="form-horizontal">
            <div class="row-fluid">
                <div class="box-body">
                    <div class="form-section-header">
                        <h3 class="form-section">Genel Bilgiler</h3>
                    </div>

                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group">
                                <label class="control-label">Tarih</label>
                                <div class="controls">
                                    <label class="control">25.02.2014</label>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">İş No</label>
                                <div class="controls">
                                    <label class="control">1213</label>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">Müşteri</label>
                                <div class="controls">
                                    <label class="control">BÜŞRA HASTÜRK</label>
                                </div>
                            </div>


                            <div class="control-group">
                                <label class="control-label">İlişkili Belge</label>
                                <div class="controls">
                                    <label class="control"><a href="/Teklif/KritikHastalik/Ekle?csid=1">1202 numaralı başvuru</a></label>
                                </div>
                            </div>
                        </div>

                        <div class="span6">

                            <div class="control-group">
                                <label class="control-label">TVM Kullanici Adi</label>
                                <div class="controls">
                                    <label class="control">Metlife Test</label>
                                </div>
                            </div>


                            <div class="control-group">
                                <label class="control-label">Kullanıcı Grubu</label>
                                <div class="controls">
                                    <label class="control">Sigorta Operasyon Grubu</label>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">İş Tipi</label>
                                <div class="controls">
                                    <label class="control">Sigorta başvuru süreci</label>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">İş Tipi Detay</label>
                                <div class="controls">
                                    <label class="control">Kritik Hastalık Başvuru sureci</label>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">Aşama</label>
                                <div class="controls">
                                    <label class="control">

                                        @if (Model.Adim == 2)
                                        {
                                            <span class="label label-warning">2. Adım</span>
                                        }
                                        else if (Model.Adim == 3)
                                        {
                                            <span class="label label-info">3. Adım</span>
                                        }
                                        else if (Model.Adim == 4)
                                        {
                                            <span id="adim4-label" class="label label-success">4. Adım</span>
                                        }
                                        else if (Model.Adim == 5)
                                        {
                                            <span id="" class="label label-success">Tamamlandı</span>
                                        }
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="form-section-header">
                        <h3 class="form-section">İşlem Bilgileri</h3>
                    </div>

                    <div class="row-fluid">
                        <div class="span6">


                            @if (Model.Adim == 2)
                            {
                                <div class="control-group">
                                    <label class="control-label">Eksik belge</label>
                                    <div class="controls">
                                        <input type="checkbox" id="eksik-belge" />
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Eksik imza</label>
                                    <div class="controls">
                                        <input type="checkbox" id="eksik-imza" />
                                    </div>
                                </div>
                                
                                <div class="control-group" id="aciklama-div" style="display: none">
                                    <label class="control-label">Açıklama</label>
                                    <div class="controls">
                                        <input type="text" />
                                    </div>
                                </div>
                            }
                            else if (Model.Adim == 3)
                            {
                                <div class="control-group">
                                    <label class="control-label">Kuryeye teslim edildi</label>
                                    <div class="controls">
                                        <input type="checkbox" id="kuryeye-teslim-edildi" />
                                    </div>
                                </div>
                            }
                            else if (Model.Adim == 4)
                            {
                                <div class="control-group">
                                    <label class="control-label">Form aslı geldi</label>
                                    <div class="controls">
                                        <input type="checkbox" id="form-asli-geldi" />
                                    </div>
                                </div>
                                <div class="control-group" id="div-form-numarasi" style="display: none">
                                    <label class="control-label">Kutu numarası</label>
                                    <div class="controls">
                                        <input type="text" id="txt-form-numarasi" />
                                    </div>
                                </div>
                            }


                        </div>
                    </div>




                    <div id="teklif-button-container" class="row-fluid" style="padding-top: 20px; padding-bottom: 20px;">
                        <div class="span4"></div>
                        <div class="span4">
                            @if (Model.Adim == 2)
                            {
                                <a href="/Teklif/KritikHastalik/Ekle?csid=1" class="btn yellow"><i class="icon-circle-arrow-left icon-white">&nbsp;</i>İADE </a>
                            }

                            @if (Model.Adim < 4)
                            {
                                <button id="beklet" class="btn btn-primary" type="button" style="margin-left: 10px;"><i class="icon-pause icon-white">&nbsp;</i>BEKLET</button>
                            }

                            @if (Model.Adim == 2)
                            {
                                <button id="ilerlet-adim2" style="margin-left: 10px;" class="btn btn-primary" type="button"><i class="icon-circle-arrow-right icon-white">&nbsp;</i>İLERLET</button>
                            }
                            else if (Model.Adim == 3)
                            {
                                <button id="ilerlet-adim3" style="margin-left: 10px;" class="btn btn-primary" type="button"><i class="icon-circle-arrow-right icon-white">&nbsp;</i>İLERLET</button>
                            }
                            else if (Model.Adim == 4)
                            {
                                <button id="ilerlet-adim4" style="margin-left: 10px;" class="btn btn-primary" type="button"><i class="icon-circle-arrow-right icon-white">&nbsp;</i>İLERLET</button>
                            }
                            else if (Model.Adim == 5)
                            {
                                <button id="tamamlandi" style="margin-left: 10px;" class="btn green" type="button"><i class="icon-circle-arrow-right icon-white">&nbsp;</i>Tamamlandı</button>
                            }

                        </div>
                    </div>


                    <div class="form-section-header">
                        @*<h4 class="form-section">1.Sigortalı</h4>*@
                    </div>
                    <div class="row-fluid">
                        <div style="margin-top: 15px;" class="tabbable tabbable-custom">
                            <ul class="nav nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#tab_1_1">Dökümanlar</a></li>
                                <li class=""><a data-toggle="tab" href="#tab_1_2">Tarihçe</a></li>
                            </ul>
                            <div class="tab-content">
                                <div id="tab_1_1" class="tab-pane active">
                                    <label><a class="btn btn-success" href="#" onclick="$('#dokuman-modal').modal('show')">Döküman Ekle</a></label>

                                    <div class="row-fluid">
                                        <div id="dokumanlar-container" class="span12">
                                            <table class="table table-striped table-bordered table-hover dataTable data-table" id="dokumanlar-table">
                                                <thead>
                                                    <tr>
                                                        <th>Döküman Türü</th>
                                                        <th>Tarih</th>
                                                        <th>Kaydı Ekleyen </th>
                                                        <th>Dosya Adı</th>

                                                        <th style="width: 10%;">&nbsp;</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tabel-body">
                                                    <tr>
                                                        <td class="">Dosya Eki</td>
                                                        <td class="">20.02.2014 17:38:53</td>
                                                        <td class="">Metlife Test</td>
                                                        <td class="">Kritik Hastalık Başvuru Sureci PDF</td>
                                                        <td><a href="https://neobabstoragetest.blob.core.windows.net/musteri-dokuman/176/KritikHastalik_Karsilastirma1.pdf">
                                                            <label class="label label-success">indir</label>
                                                        </a>
                                                            <a href="#" onclick="alert('Döküman silindi')">
                                                                <label class="label label-important">sil</label>
                                                            </a>
                                                        </td>

                                                    </tr>
                                                    <tr>
                                                        <td class="">İmza Sirküsü</td>
                                                        <td class="">23.02.2014 11:32:53</td>
                                                        <td class="">Metlife Test</td>
                                                        <td class="">Kritik H. Sureci PDF ve Excel</td>
                                                        <td><a href="https://neobabstoragetest.blob.core.windows.net/musteri-dokuman/176/KritikHastalik_Karsilastirma1.pdf">
                                                            <label class="label label-success">indir</label>
                                                        </a>
                                                            <a href="#" class="sil">
                                                                <label class="label label-important">sil</label>
                                                            </a>
                                                        </td>

                                                    </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div>
                                <div id="tab_1_2" class="tab-pane">
                                    @*<label><a class="btn btn-success" href="javascript:void(0)" id="not-ekle">Not Ekle</a></label>*@

                                    <div class="row-fluid">
                                        <div id="notlar-container" class="span12">
                                            <table class="table table-striped table-bordered table-hover dataTable data-table" id="notlar-table">
                                                <thead>
                                                    <tr>
                                                        <th>İlgilenen </th>
                                                        <th>Atanan</th>
                                                        <th>Açıklama</th>
                                                        <th>Aşama</th>
                                                        <th>Tarih</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td class="">Ahmet Ateş</td>
                                                        <td class="">Metlife Test</td>
                                                        <td class="">İmza Eksik</td>
                                                        <td class="">Beklemede</td>
                                                        <td class="">23.02.2014 11:32:53</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="">Mehmet Veli</td>
                                                        <td class="">Selami Şahin</td>
                                                        <td class="">Herşey tamam</td>
                                                        <td class="">Çalışıyor</td>
                                                        <td class="">23.02.2014 11:32:53</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="">Ali Tuna</td>
                                                        <td class="">Metlife Test</td>
                                                        <td class="">Tamamlandı</td>
                                                        <td class="">Tamamlandı</td>
                                                        <td class="">27.02.2014 14:62:23</td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>





<div id="dokuman-modal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
        <h3>Döküman Ekle</h3>
    </div>
    <div class="modal-body">
        <form id="dokuman-ekle-form" class="form-horizontal" name="dokuman-ekle-form" enctype="multipart/form-data">

            <div class="control-group">
                <label class="control-label">Döküman Tipi</label>
                <div class="controls">
                    @Html.TextBox("dokumantipi")
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Dosya</label>
                <div class="controls">
                    <input type="file" id="file" name="file" style="width: 300px;" />
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Çıkış</a>
        <a href="#" id="dokuman-ekle-btn" class="btn btn-success"><i class="icon-ok">&nbsp;</i>Kaydet</a>
    </div>
</div>

<script>

    $("#ilerlet-adim2").click(function () {
        if ($("#eksik-belge").is(":checked")) {
            alert("Eksik belge var ilerletemezsiniz.");
        }
        else if ($("#eksik-imza").is(":checked")) {
            alert("Eksik imza var ilerletemezsiniz.");
        }
        else if (confirm("Kontrol sonucu herhangi bir eksiklik yoktur, onaylıyor musunuz?")) {
            window.location.href = "@Url.Content("~/Teklif/KritikHastalik/IsDetay?adim=3")";
        }
    });

$("#ilerlet-adim3").click(function () {
    if (!$("#kuryeye-teslim-edildi").is(":checked"))
    { alert("Kuryeye teslim edilmeden ilerlenemez") }
    else if (confirm("Kuryeye teslim ettiğinizi belirtiyorsunuz, onaylıyor musunuz?")) {
        window.location.href = "@Url.Content("~/Teklif/KritikHastalik/IsDetay?adim=4")";
    }
});

$("#ilerlet-adim4").click(function () {
    if (!$("#form-asli-geldi").is(":checked")) {
        alert("Form aslı gelmeden ilerlenemez");
    }
    else if ($("#txt-form-numarasi").val() == "") {
        alert("Kutu numarasını girmeden işi ilerletemezsiniz");
    }
    else if (confirm("Form aslının geldiğini belirtiyorsunuz, onaylıyor musunuz?")) {
        alert("İşlem Tamamlandı");
        window.location.href = "@Url.Content("~/Teklif/KritikHastalik/IsDetay?adim=5")";
    }
});



$("#dokuman-ekle-btn").live("click", function () {
    $('#dokuman-modal').modal('hide');
    alert('Döküman başarıyla eklendi');
    $("#tabel-body").append("<tr><td>Dosya Eki</</td><td>23.02.2014 11:32:53</td><td>Metlife Test</td><td>Kritik Hastalık Başvuru Sureci PDF</td>"
        + "<td><a href='https://neobabstoragetest.blob.core.windows.net/musteri-dokuman/176/KritikHastalik_Karsilastirma1.pdf'>"
        + "<label class='label label-success'>indir</label></a>&nbsp;"
        + "<a href='#' class='sil'><label class='label label-important'>sil</label></a></td></tr>");
});


$("#form-asli-geldi").change(function () {
    if ($(this).is(':checked')) {
        $("#div-form-numarasi").show();
    }
    else {
        $("#div-form-numarasi").hide();
        $("#txt-form-numarasi").val("");
    }

});

$(".sil").live("click", function () { alert("Doküman başarıyla silindi.") });


$("#eksik-belge,#eksik-imza").change(function () {
    if ($("#eksik-belge").is(":checked") || $("#eksik-imza").is(":checked")) {
        $("#aciklama-div").show();
    } else if (!$("#eksik-belge").is(":checked") && !$("#eksik-imza").is(":checked")) {
        $("#aciklama-div").hide();
    }
});

</script>
